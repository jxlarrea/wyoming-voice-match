services:
  wyoming-voice-match:
    image: ghcr.io/jxlarrea/wyoming-voice-match:cpu
    container_name: wyoming-voice-match
    restart: unless-stopped
    ports:
      - "10350:10350"
    volumes:
      - ./data:/data
    environment:
      - UPSTREAM_URI=tcp://wyoming-faster-whisper:10300
      - VERIFY_THRESHOLD=0.20
      - LISTEN_URI=tcp://0.0.0.0:10350
      - HF_HOME=/data/hf_cache
      - LOG_LEVEL=DEBUG
      # - MAX_VERIFY_SECONDS=5.0   # First-pass verification window
      # - VERIFY_WINDOW_SECONDS=3.0       # Sliding window size for fallback pass
      # - VERIFY_STEP_SECONDS=1.5         # Sliding window step size