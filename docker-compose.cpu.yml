services:
  voice-match:
    build:
      context: .
      dockerfile: Dockerfile.cpu
    image: wyoming-voice-match:cpu
    container_name: wyoming-voice-match
    restart: unless-stopped
    ports:
      - "10350:10350"
    volumes:
      - ./data:/data
    environment:
      - UPSTREAM_URI=tcp://wyoming-faster-whisper:10300
      - THRESHOLD=0.45
      - LISTEN_URI=tcp://0.0.0.0:10350
      - DEVICE=cpu
      - HF_HOME=/data/hf_cache
      - LOG_LEVEL=DEBUG